<h1 align="center"> üõí –°–µ—Ä–≤–∏—Å –º–∞–≥–∞–∑–∏–Ω–æ–≤ </h1>

<p align="center">
<a href="https://github.com/light-hat/shop_service/actions"><img alt="Unit test status" src="https://img.shields.io/badge/Python-3.12-3776AB.svg?style=flat&logo=python&logoColor=white"></a>
<a href="https://github.com/light-hat/shop_service/actions"><img alt="Unit test status" src="https://github.com/light-hat/shop_service/workflows/Unit%20testing/badge.svg"></a>
<a href="https://github.com/light-hat/shop_service/actions"><img alt="Pylint status" src="https://github.com/light-hat/shop_service/workflows/Pylint/badge.svg"></a>
<a href="https://github.com/light-hat/shop_service/actions"><img alt="Bandit SAST status" src="https://github.com/light-hat/shop_service/workflows/SAST/badge.svg"></a>
<a href="https://github.com/psf/black"><img alt="Code style: black" src="https://img.shields.io/badge/code%20style-black-000000.svg"></a>
</p>

![Deploy](assets/docker_deploy.gif)

–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ –≤ –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã–π –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–¥–æ—á–µ—Ä–Ω—è—è –∫–æ–º–ø–∞–Ω–∏—è –ê–û –ò–Ω—Ñ–æ–¢–µ–ö–°).


## üîó –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

| –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å         | –í–µ—Ä—Å–∏—è       |
|---------------------|--------------|
| Django              | `5.1.2`      |
| djangorestframework | `3.15.2`     |
| drf-spectacular     | `0.27.2`     |
| psycopg2-binary     | `2.9.10`     |
| gunicorn            | `23.0.0`     |


## üì° REST API

![Swagger](assets/swagger.png)

API –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –ø—Ä–∏ –ø–æ–º–æ—â–∏ Swagger (`drf-spectacular`).

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API: `http://127.0.0.1/swagger/`

YAML: `http://127.0.0.1/schema/`

## üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

![ERD](assets/database.png)

–°–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏ (–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ):

- –£–ª–∏—Ü–∞ –∫ –≥–æ—Ä–æ–¥—É: `–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É`;

- –ú–∞–≥–∞–∑–∏–Ω –∫ —É–ª–∏—Ü–µ: `–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É`;

- –ú–∞–≥–∞–∑–∏–Ω –∫ –≥–æ—Ä–æ–¥—É: `–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É`.

–°–£–ë–î: `PostgreSQL 15 –≤–µ—Ä—Å–∏–∏`.

ORM: `Django ORM`.

## üë©‚Äçüíª –ê–¥–º–∏–Ω–∫–∞ Django

![Admin](assets/admin.png)

- –ê–¥–º–∏–Ω–∫–∞ Django –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É `http://127.0.0.1/admin`.

- –£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞: `admin:admin`.

> [!IMPORTANT]
> –£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–º–µ–Ω–∏—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ –±–æ–ª–µ–µ —É—Å—Ç–æ–π—á–∏–≤—ã–µ.

- –¢–∞–∫–∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –≤ –ë–î —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è –º–æ–¥–µ–ª–µ–π –≥–æ—Ä–æ–¥–∞, —É–ª–∏—Ü—ã –∏ –º–∞–≥–∞–∑–∏–Ω–∞.

- –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Å–µ—Ä–≤–∏—Å–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é –∫–∞—Å—Ç–æ–º–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã:

```shell
python3 manage.py initdb
```

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Ç—É—Ç: `api/management/commands/initdb.py`.

> [!TIP]
> –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å—Ç–µ–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –±–∞–∑–∞ –æ–±–æ–≥–∞—â–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

–í –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```
API_URL=127.0.0.1
API_PORT=80
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=shop_database
```

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

- `API_URL`: –∞–¥—Ä–µ—Å, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç —Å–µ—Ä–≤–∏—Å;

- `API_PORT`: –ø–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã —Å–µ—Ä–≤–∏—Å;

- `POSTGRES_HOST`: —Ö–æ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–∏–º—è —Å–µ—Ä–≤–∏—Å–∞ –≤ —Å—Ç–µ–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π);

- `POSTGRES_PORT`: –ø–æ—Ä—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö;

- `POSTGRES_USER`: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö;

- `POSTGRES_PASSWORD`: –ø–∞—Ä–æ–ª—å –æ—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö;

- `POSTGRES_DB`: –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π —Å–µ—Ä–≤–∏—Å–æ–º.

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

–î–ª—è –Ω–∞—á–∞–ª–∞ –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```shell
git clone https://github.com/light-hat/shop_service
cd shop_service
```

–î–∞–ª–µ–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –Ω–∞ –≤—ã–±–æ—Ä:

> [!NOTE]
> –°–µ—Ä–≤–∏—Å –≤ –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `127.0.0.1:80`.

### 1. Docker üêã

> [!WARNING]  
> –í —Å–∏—Å—Ç–µ–º–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã `Docker` –∏ `Docker Compose`.

```shell
docker-compose up -d --build
```

### 2. Vagrant ‚≠ï

> [!WARNING]  
> –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã `Vagrant` –∏ `VirtualBox`.

> [!TIP]
> –ë–∞–∑–æ–≤—ã–π box `ubuntu/focal64` –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å [–æ—Ç—Å—é–¥–∞](https://portal.cloud.hashicorp.com/vagrant/discover/ubuntu/focal64).

```shell
vagrant up
```

## ü§ñ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–º —á–µ—Ä–µ–∑ Make

> [!IMPORTANT]
> –î–ª—è —ç—Ç–æ–≥–æ –≤ —Å–∏—Å—Ç–µ–º–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `Make`. –ü—Ä–∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–∏ —á–µ—Ä–µ–∑ Vagrant, make —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.


–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å docker-compose –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç—ã Make.

- –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Å—Ç–µ–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:

```shell
make build
```

- –ó–∞–ø—É—Å–∫ —Ä–∞–Ω–µ–µ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ —Å—Ç–µ–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:

```shell
make up
```

- –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–µ–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:

```shell
make down
```

- –ü–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ —Ç–æ–º–æ–≤ –∏ –±–µ–∑ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:

```shell
make rebuild
```

- –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Å–µ—Ç–∏ –∏ —Ç–æ–º–∞:

```shell
make clean
```

- –í—ã–≤–µ—Å—Ç–∏ –ª–æ–≥–∏:

```shell
make logs
```

- –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `black`:

```shell
make black
```

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

```shell
make status
```

## üß™ –ú–æ–¥—É–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ù–µ —É—Å–ø–µ–ª —É–∂–µ =(

–°–¥–µ–ª–∞–Ω–æ, –Ω–æ –º–∞–ª–æ, —Ç–æ–ª—å–∫–æ –¥–ª—è –º–æ–¥–µ–ª–∏ Shop. –¢–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏, —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä POST-–∑–∞–ø—Ä–æ—Å–∞ –∏ –≤—å—é—Ö–∞ —Ñ–∏–ª—å—Ç—Ä–∞ –º–∞–≥–∞–∑–∏–Ω–æ–≤.
